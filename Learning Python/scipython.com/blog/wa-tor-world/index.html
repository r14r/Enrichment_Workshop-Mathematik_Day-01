<!doctype html>
<html lang="en">


<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="keywords" content="">
<meta name="description" content="Wa-Tor is a population dynamics simulation described by Alexander Dewdney in Scientific American (1984): &quot;Computer Recreations: Sharks and fish wage an ecological war on the toroidal planet Wa-Tor&quot;.">
<title>Wa-Tor World</title>
<link rel="shortcut icon" href="/static/img/favicon.ico">


<link rel="alternate" type="application/rss+xml" title="RSS" href="/blog/feeds/rss/">
<link rel="alternate" type="application/atom+xml" title="Atom" href="/blog/feeds/atom/">



<link rel="stylesheet" href="/static/css/bootstrap.css">
<link rel="stylesheet" href="/static/css/mezzanine.css">
<link rel="stylesheet" href="/static/css/codehilite.css">
<link rel="stylesheet" href="/static/css/custom.css">






<script src="/static/mezzanine/js/jquery-1.8.3.min.js"></script>
<script src="/static/js/bootstrap.js"></script>
<script src="/static/js/bootstrap-extras.js"></script>



<!--[if lt IE 9]>
<script src="/static/js/html5shiv.js"></script>
<script src="/static/js/respond.min.js"></script>
<![endif]-->



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


</head>

<body id="body">

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle Navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
    
    
</div>
<div class="navbar-collapse collapse">
    
<form action="/search/" class="navbar-form navbar-right" role="search">

<div class="form-group">
    <input class="form-control" placeholder="Search" type="text" name="q" value="">
</div>


    
    <div class="form-group">
    <select class="form-control" name="type">
        <option value="">Everything</option>
        
        <option value="blog.BlogPost"
            >
            Blog posts
        </option>
        
        <option value="pages.Page"
            >
            Pages
        </option>
        
    </select>
    </div>
    


<input type="submit" class="btn btn-default" value="Go">

</form>

    
<ul class="nav navbar-nav"><li id="dropdown-menu-home"><a href="/">Home</a></li><li class="dropdown
               "
        id="about"><a href="/about/"
        
        class="dropdown-toggle disabled" data-toggle="dropdown"
        >
            About
            <b class="caret"></b></a><ul class="dropdown-menu"><li class="
               "
        id="about-the-author"><a href="/about/the-author/">The Author</a></li><li class="
               "
        id="about-the-book"><a href="/about/the-book/">The Book</a></li><li class="
               "
        id="about-this-website"><a href="/about/this-website/">This Website</a></li></ul></li><li class="dropdown
               "
        id="book"><a href="/book/"
        
        class="dropdown-toggle disabled" data-toggle="dropdown"
        >
            Book
            <b class="caret"></b></a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-1-introduction"><a href="/book/chapter-1-introduction/">Chapter 1: Introduction</a></li><li class="dropdown-submenu
               "
        id="book-chapter-2-the-core-python-language-i"><a href="/book/chapter-2-the-core-python-language-i/">Chapter 2: The Core Python Language I</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-2-the-core-python-language-i-examples"><a href="/book/chapter-2-the-core-python-language-i/examples/">Examples</a></li><li class="
               "
        id="book-chapter-2-the-core-python-language-i-questions"><a href="/book/chapter-2-the-core-python-language-i/questions/">Questions</a></li><li class="
               "
        id="book-chapter-2-the-core-python-language-i-questions-problems"><a href="/book/chapter-2-the-core-python-language-i/questions/problems/">Problems</a></li><li class="
               "
        id="book-chapter-2-the-core-python-language-i-additional-problems"><a href="/book/chapter-2-the-core-python-language-i/additional-problems/">Additional Problems</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-3-simple-plotting-with-pylab"><a href="/book/chapter-3-simple-plotting-with-pylab/">Chapter 3: Simple Plotting with pylab</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-3-simple-plotting-with-pylab-examples"><a href="/book/chapter-3-simple-plotting-with-pylab/examples/">Examples</a></li><li class="
               "
        id="book-chapter-3-simple-plotting-with-pylab-problems"><a href="/book/chapter-3-simple-plotting-with-pylab/problems/">Problems</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-4-the-core-python-language-ii"><a href="/book/chapter-4-the-core-python-language-ii/">Chapter 4: The core Python language II</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-4-the-core-python-language-ii-examples"><a href="/book/chapter-4-the-core-python-language-ii/examples/">Examples</a></li><li class="
               "
        id="book-chapter-4-the-core-python-language-ii-questions"><a href="/book/chapter-4-the-core-python-language-ii/questions/">Questions</a></li><li class="
               "
        id="book-chapter-4-the-core-python-language-ii-problems"><a href="/book/chapter-4-the-core-python-language-ii/problems/">Problems</a></li><li class="
               "
        id="book-chapter-4-the-core-python-language-ii-additional-problems"><a href="/book/chapter-4-the-core-python-language-ii/additional-problems/">Additional Problems</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-5-ipython-and-ipython-notebook"><a href="/book/chapter-5-ipython-and-ipython-notebook/">Chapter 5: IPython and IPython Notebook</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-5-ipython-and-ipython-notebook-examples"><a href="/book/chapter-5-ipython-and-ipython-notebook/examples/">Examples</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-6-numpy"><a href="/book/chapter-6-numpy/">Chapter 6: NumPy</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-6-numpy-examples"><a href="/book/chapter-6-numpy/examples/">Examples</a></li><li class="
               "
        id="book-chapter-6-numpy-questions"><a href="/book/chapter-6-numpy/questions/">Questions</a></li><li class="
               "
        id="book-chapter-6-numpy-problems"><a href="/book/chapter-6-numpy/problems/">Problems</a></li><li class="
               "
        id="book-chapter-6-numpy-additional-examples"><a href="/book/chapter-6-numpy/additional-examples/">Additional Examples</a></li><li class="
               "
        id="book-chapter-6-numpy-additional-problems"><a href="/book/chapter-6-numpy/additional-problems/">Additional Problems</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-7-matplotlib"><a href="/book/chapter-7-matplotlib/">Chapter 7: Matplotlib</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-7-matplotlib-examples"><a href="/book/chapter-7-matplotlib/examples/">Examples</a></li><li class="
               "
        id="book-chapter-7-matplotlib-questions"><a href="/book/chapter-7-matplotlib/questions/">Questions</a></li><li class="
               "
        id="book-chapter-7-matplotlib-problems"><a href="/book/chapter-7-matplotlib/problems/">Problems</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-8-scipy"><a href="/book/chapter-8-scipy/">Chapter 8: SciPy</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-8-scipy-examples"><a href="/book/chapter-8-scipy/examples/">Examples</a></li><li class="
               "
        id="book-chapter-8-scipy-questions"><a href="/book/chapter-8-scipy/questions/">Questions</a></li><li class="
               "
        id="book-chapter-8-scipy-problems"><a href="/book/chapter-8-scipy/problems/">Problems</a></li><li class="
               "
        id="book-chapter-8-scipy-additional-examples"><a href="/book/chapter-8-scipy/additional-examples/">Additional Examples</a></li><li class="
               "
        id="book-chapter-8-scipy-additional-problems"><a href="/book/chapter-8-scipy/additional-problems/">Additional Problems</a></li></ul></li><li class="dropdown-submenu
               "
        id="book-chapter-9-general-scientific-programming"><a href="/book/chapter-9-general-scientific-programming/">Chapter 9: General Scientific Programming</a><ul class="dropdown-menu"><li class="
               "
        id="book-chapter-9-general-scientific-programming-examples"><a href="/book/chapter-9-general-scientific-programming/examples/">Examples</a></li><li class="
               "
        id="book-chapter-9-general-scientific-programming-questions"><a href="/book/chapter-9-general-scientific-programming/questions/">Questions</a></li><li class="
               "
        id="book-chapter-9-general-scientific-programming-problems"><a href="/book/chapter-9-general-scientific-programming/problems/">Problems</a></li></ul></li><li class="
               "
        id="book-errata"><a href="/book/errata/">Errata</a></li></ul></li><li class="
               active"
        id="blog"><a href="/blog/"
        >
            Blog
            
        </a></li><li class="
               "
        id="apps"><a href="/apps/"
        >
            Apps
            
        </a></li><li class="
               "
        id="contact"><a href="/contact/"
        >
            Contact
            
        </a></li></ul>

</div>
</div>
</div>

<div class="container">





<ul class="breadcrumb">
<li id="breadcrumb-menu-home"><a href="/">Home</a></li><li id="breadcrumb-menu-blog"><a href="/blog/">Blog</a></li><li class="active">Wa-Tor World</li>
</ul>

<h1>
Wa-Tor World
</h1>

</div>

<div class="container">
<div class="row">

<div class="col-md-12 middle" style="max-width: 760px;">
    



<h6 class="post-meta">
    Posted by:
    
    <a href="/blog/author/christian/">christian</a> on
    
    10 Mar 2017
</h6>



<p>
    
        (<a href="#comments">1 comment</a>)
        
    
</p>






<p><a href="https://en.wikipedia.org/wiki/Wa-Tor">Wa-Tor</a> is a population dynamics simulation described by Alexander Dewdney in Scientific American (1984): <a href="home.cc.gatech.edu/biocs1/uploads/2/wator_dewdney.pdf"><em>"Computer Recreations: Sharks and fish wage an ecological war on the toroidal planet Wa-Tor"</em></a>.</p>
<p><img alt="enter image description here" class="fig" src="/static/media/uploads/blog/wa_tor/wator.gif"></p>
<p><em>In the above animation, fish (prey) are pink and sharks (predators) are yellow</em>. In this case, the populations of each fluctuate over time, but don't lead to extinction of either species.</p>
<p>The rules of the simulation are well-described <a href="https://en.wikipedia.org/wiki/Wa-Tor#Rules">in the Wikipedia article</a> on Wa-Tor, but in summary:</p>
<ul>
<li>
<p>The Wa-Tor world consists of a two-dimensional grid of cells which may be empty, contain a <strong>fish</strong> or contain a <strong>shark</strong>. The grid wraps top-to-bottom and left-to-right so may also be thought of as a torus (hence Wa-<em>Tor</em>).</p>
</li>
<li>
<p>Time progresses in discrete ticks, called chronons. At each chronon, each creature's state evolves according to the following rules:</p>
<ul>
<li>Each fish moves randomly to an adjacent cell; if the cells are all occupied, it doesn't move;</li>
<li>After a fish has survived a fixed number of chronons (<code>fertility_threshold</code> in the code below), it reproduces by leaving another fish behind on its previous cell after it moves. Afterwards, its fertility is reset to zero;</li>
<li>Each shark moves randomly to an adjacent cell occupied by a fish and gains a certain amount of energy in doing so (by "eating" the fish); if the adjacent cells are all empty, it moves into one of them at random; if the adjacent cells are full of sharks, it doesn't move;</li>
<li>After every chronon, each shark loses one unit of energy. If a shark's energy reaches zero, it dies;</li>
<li>Once a shark has reached its own fertility threshold, it reproduces in the same manner as the fish.</li>
</ul>
</li>
</ul>
<p>Here is the code. Various parts can be customized where indicated. It produces a sequence of PNG files which can be converted into an animation as above with e.g. <code>ffmpeg</code> or <a href="https://www.imagemagick.org/script/index.php">ImageMagick</a>'s <code>convert</code>.</p>
<p>Some care is needed to adjust the simulation parameters to avoid the common outcomes of (a) extinction of all species (first the sharks eat all the fish, then they die of starvation) or (b) extinction of all the sharks (too few fish to begin with so the sharks die out before the fish breed to saturation).</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LinearSegmentedColormap</span>

<span class="n">EMPTY</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">FISH</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">SHARK</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># Colour the cells for the above states in this order:</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'#00008b'</span><span class="p">,</span> <span class="s1">'#ff69b4'</span><span class="p">,</span> <span class="s1">'#ffd700'</span><span class="p">]</span>
<span class="n">n_bin</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">LinearSegmentedColormap</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span>
        <span class="s1">'wator_cmap'</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="n">n_bin</span><span class="p">)</span>

<span class="c1"># Run the simulation for MAX_CHRONONS chronons (time intervals).</span>
<span class="n">MAX_CHRONONS</span> <span class="o">=</span> <span class="mi">400</span>
<span class="c1"># Save every SAVE_EVERYth chronon iteration.</span>
<span class="n">SAVE_EVERY</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c1"># PRNG seed.</span>
<span class="n">SEED</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">SEED</span><span class="p">)</span>

<span class="n">initial_energies</span> <span class="o">=</span> <span class="p">{</span><span class="n">FISH</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="n">SHARK</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">fertility_thresholds</span> <span class="o">=</span> <span class="p">{</span><span class="n">FISH</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="n">SHARK</span><span class="p">:</span> <span class="mi">12</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Creature</span><span class="p">():</span>
    <span class="sd">"""A sea creature living in Wa-Tor world."""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">init_energy</span><span class="p">,</span> <span class="n">fertility_threshold</span><span class="p">):</span>
        <span class="sd">"""Initialize the creature.</span>

<span class="sd">        id is an integer identifying the creature.</span>
<span class="sd">        x, y is the creature's position in the Wa-Tor world grid.</span>
<span class="sd">        init_energy is the creature's initial energy: this decreases by 1</span>
<span class="sd">            each time the creature moves and if it reaches 0 the creature dies.</span>
<span class="sd">        fertility_threshold: each chronon, the creature's fertility increases</span>
<span class="sd">            by 1. When it reaches fertility_threshold, the creature reproduces.</span>

<span class="sd">        """</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">energy</span> <span class="o">=</span> <span class="n">init_energy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertility_threshold</span> <span class="o">=</span> <span class="n">fertility_threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertility</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dead</span> <span class="o">=</span> <span class="bp">False</span>


<span class="k">class</span> <span class="nc">World</span><span class="p">():</span>
    <span class="sd">"""The Wa-Tor world."""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
        <span class="sd">"""Initialize (but don't populate) the Wa-Tor world."""</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncells</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="p">[[</span><span class="n">EMPTY</span><span class="p">]</span><span class="o">*</span><span class="n">width</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creatures</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">spawn_creature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">creature_id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">"""Spawn a creature of type ID creature_id at location x,y."""</span>

        <span class="n">creature</span> <span class="o">=</span> <span class="n">Creature</span><span class="p">(</span><span class="n">creature_id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span>
                            <span class="n">initial_energies</span><span class="p">[</span><span class="n">creature_id</span><span class="p">],</span>
                            <span class="n">fertility_thresholds</span><span class="p">[</span><span class="n">creature_id</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creatures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">creature</span>

    <span class="k">def</span> <span class="nf">populate_world</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nfish</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">nsharks</span><span class="o">=</span><span class="mi">40</span><span class="p">):</span>
        <span class="sd">"""Populate the Wa-Tor world with fish and sharks."""</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nfish</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsharks</span> <span class="o">=</span> <span class="n">nfish</span><span class="p">,</span> <span class="n">nsharks</span>

        <span class="k">def</span> <span class="nf">place_creatures</span><span class="p">(</span><span class="n">ncreatures</span><span class="p">,</span> <span class="n">creature_id</span><span class="p">):</span>
            <span class="sd">"""Place ncreatures of type ID creature_id in the Wa-Tor world."""</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncreatures</span><span class="p">):</span>
                <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncells</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">spawn_creature</span><span class="p">(</span><span class="n">creature_id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                        <span class="k">break</span>

        <span class="n">place_creatures</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nfish</span><span class="p">,</span> <span class="n">FISH</span><span class="p">)</span>
        <span class="n">place_creatures</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nsharks</span><span class="p">,</span> <span class="n">SHARK</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_world_image_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return a 2D array of creature type IDs from the world grid."""</span>
        <span class="k">return</span> <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="k">else</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">get_world_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Create a Matplotlib figure plotting the world."""</span>

        <span class="n">im</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">get_world_image_array</span><span class="p">()</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">8.3333</span><span class="p">,</span> <span class="mf">6.25</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">72</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">'nearest'</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="p">)</span>

        <span class="c1"># Remove ticks, border, axis frame, etc</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">'off'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">show_world</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Show the world as a Matplotlib image."""</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_world_image</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_world</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">"""Save a Matplotlib image of the world as filename."""</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_world_image</span><span class="p">()</span>
        <span class="c1"># NB Ensure there's no padding around the image plot</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">72</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">'tight'</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_neighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">"""Return a dictionary of the contents of cells neighbouring (x,y).</span>

<span class="sd">        The dictionary is keyed by the neighbour cell's position and contains</span>
<span class="sd">        either EMPTY or the instance of the creature occupying that cell.</span>

<span class="sd">        """</span>

        <span class="n">neighbours</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="ow">in</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)):</span>
            <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">dx</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="n">dy</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
            <span class="n">neighbours</span><span class="p">[</span><span class="n">xp</span><span class="p">,</span><span class="n">yp</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">yp</span><span class="p">][</span><span class="n">xp</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">neighbours</span>

    <span class="k">def</span> <span class="nf">evolve_creature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">creature</span><span class="p">):</span>
        <span class="sd">"""Evolve a given creature forward in time by one chronon."""</span>

        <span class="n">neighbours</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_neighbours</span><span class="p">(</span><span class="n">creature</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">creature</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">creature</span><span class="o">.</span><span class="n">fertility</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">moved</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">creature</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">SHARK</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Try to pick a random fish to eat.</span>
                <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="n">pos</span>
                            <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">neighbours</span> <span class="k">if</span> <span class="n">neighbours</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="o">!=</span><span class="n">EMPTY</span>
                                                <span class="ow">and</span> <span class="n">neighbours</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">FISH</span><span class="p">])</span>
                <span class="c1"># Eat the fish. Yum yum.</span>
                <span class="n">creature</span><span class="o">.</span><span class="n">energy</span> <span class="o">+=</span> <span class="mi">2</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">yp</span><span class="p">][</span><span class="n">xp</span><span class="p">]</span><span class="o">.</span><span class="n">dead</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">yp</span><span class="p">][</span><span class="n">xp</span><span class="p">]</span> <span class="o">=</span> <span class="n">EMPTY</span>
                <span class="n">moved</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="c1"># No fish to eat: just move to a vacant cell if possible.</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">moved</span><span class="p">:</span>
            <span class="c1"># Try to move to a vacant cell</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="n">pos</span>
                            <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">neighbours</span> <span class="k">if</span> <span class="n">neighbours</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="o">==</span><span class="n">EMPTY</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">creature</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">FISH</span><span class="p">:</span>
                    <span class="c1"># The shark's energy decreases by one unit when it moves.</span>
                    <span class="n">creature</span><span class="o">.</span><span class="n">energy</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="n">moved</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="c1"># Surrounding cells are all full: no movement.</span>
                <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span> <span class="o">=</span> <span class="n">creature</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">creature</span><span class="o">.</span><span class="n">y</span>

        <span class="k">if</span> <span class="n">creature</span><span class="o">.</span><span class="n">energy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Creature dies.</span>
            <span class="n">creature</span><span class="o">.</span><span class="n">dead</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">creature</span><span class="o">.</span><span class="n">y</span><span class="p">][</span><span class="n">creature</span><span class="o">.</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">EMPTY</span>
        <span class="k">elif</span> <span class="n">moved</span><span class="p">:</span>
            <span class="c1"># Remember the creature's old position.</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">creature</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">creature</span><span class="o">.</span><span class="n">y</span>
            <span class="c1"># Set new position</span>
            <span class="n">creature</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">creature</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">yp</span><span class="p">][</span><span class="n">xp</span><span class="p">]</span> <span class="o">=</span> <span class="n">creature</span>
            <span class="k">if</span> <span class="n">creature</span><span class="o">.</span><span class="n">fertility</span> <span class="o">&gt;=</span> <span class="n">creature</span><span class="o">.</span><span class="n">fertility_threshold</span><span class="p">:</span>
                <span class="c1"># Spawn a new creature and reset fertility.</span>
                <span class="n">creature</span><span class="o">.</span><span class="n">fertility</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spawn_creature</span><span class="p">(</span><span class="n">creature</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Leave the old cell vacant.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">EMPTY</span>

    <span class="k">def</span> <span class="nf">evolve_world</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Evolve the Wa-Tor world forward in time by one chronon."""</span>

        <span class="c1"># Shuffle the creatures grid so that we don't always evolve the same</span>
        <span class="c1"># creatures first.</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">creatures</span><span class="p">)</span>

        <span class="c1"># NB The self.creatures list is going to grow as new creatures are</span>
        <span class="c1"># spawned, so loop over indices into the list as it stands now.</span>
        <span class="n">ncreatures</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">creatures</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncreatures</span><span class="p">):</span>
            <span class="n">creature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">creatures</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">creature</span><span class="o">.</span><span class="n">dead</span><span class="p">:</span>
                <span class="c1"># This creature has been eaten so skip it.</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evolve_creature</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span>

        <span class="c1"># Remove the dead creatures</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">creature</span> <span class="k">for</span> <span class="n">creature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">creatures</span>
                                                <span class="k">if</span> <span class="ow">not</span> <span class="n">creature</span><span class="o">.</span><span class="n">dead</span><span class="p">]</span>

<span class="n">world</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
<span class="n">world</span><span class="o">.</span><span class="n">populate_world</span><span class="p">()</span>
<span class="k">for</span> <span class="n">chronon</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">400</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">chronon</span> <span class="o">%</span> <span class="n">SAVE_EVERY</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'{}/{}: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chronon</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">MAX_CHRONONS</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">creatures</span><span class="p">)))</span>
        <span class="n">world</span><span class="o">.</span><span class="n">save_world</span><span class="p">(</span><span class="s1">'world-{:04d}.png'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chronon</span><span class="p">))</span>
    <span class="n">world</span><span class="o">.</span><span class="n">evolve_world</span><span class="p">()</span>
</pre></div>









<div class="panel panel-default rating">
    <div class="panel-body">
    

<span id="rating-62">
    
    Current rating: 3.2
    
</span>


<form class="form-inline" role="form" method="post" action="/rating/">
    
    <input type='hidden' name='csrfmiddlewaretoken' value='jYnwcXau4v3oisaXo6kU5XwazOjbqb30iVxNOt1ZynyF4fznQlXMoZonig2HtHxZ' />
    
    <ul class="radio radio-inline"><li> <ul id="id_value"><li><label for="id_value_0"><input id="id_value_0" name="value" type="radio" value="1" required /> 1</label></li>
<li><label for="id_value_1"><input id="id_value_1" name="value" type="radio" value="2" required /> 2</label></li>
<li><label for="id_value_2"><input id="id_value_2" name="value" type="radio" value="3" required /> 3</label></li>
<li><label for="id_value_3"><input id="id_value_3" name="value" type="radio" value="4" required /> 4</label></li>
<li><label for="id_value_4"><input id="id_value_4" name="value" type="radio" value="5" required /> 5</label></li></ul><input id="id_content_type" name="content_type" type="hidden" value="blog.blogpost" /><input id="id_object_pk" name="object_pk" type="hidden" value="62" /><input id="id_timestamp" name="timestamp" type="hidden" value="1595058578" /><input id="id_security_hash" maxlength="40" minlength="40" name="security_hash" type="hidden" value="498e548d7989492df60ea9feb19f7213d3fa5af5" /></li></ul>
    <input type="submit" class="btn btn-default btn-sm" value="Rate"
        onclick="return $(this.form).find('input:checked').length == 1;">
</form>


    </div>
</div>




<a class="btn btn-sm share-twitter" target="_blank" href="http://twitter.com/home?status=http%3A//scipython.com/blog/wa-tor-world/%20Wa-Tor%20World">Share on Twitter</a>
<a class="btn btn-sm share-facebook" target="_blank" href="http://facebook.com/sharer.php?u=https://scipython.com/blog/wa-tor-world/&amp;t=Wa-Tor%20World">Share on Facebook</a>



<ul class="pager">


<li class="previous">
    <a href="/blog/disasters-in-great-britain-and-ireland-over-time/">&larr; Disasters in Great Britain and Ireland over time</a>
</li>




<li class="next">
    <a href="/blog/the-goldbach-comet/">The Goldbach Comet &rarr;</a>
</li>


</ul>








<div id="comments">
<h3>Comments</h3>
<p>Comments are pre-moderated. Please be patient and your comment will appear soon.</p>

<script>
$(function() {
    $('.reply').click(function() {
        $('.comment-reply-form').hide();
        $(this).siblings('.comment-reply-form').toggle();
    });
});
</script>
<style>.input_id_honeypot {display:none !important;}</style>




<div id="comment-233"
    class="comment media">

    
    
    
    <img class="pull-left media-object" src="//www.gravatar.com/avatar/4bdd480028e57f634f20d980edd31b86?s=32&amp;d=identicon&amp;r=PG">
    <div class="media-body">
        <h4 class="media-heading">Mr. Lauris Grundmanis
    
            <small class="timespan">
                1 year, 4 months ago
            </small>
        </h4>
    <p>I read this article during my last year at the University of Minnesota and did an independent study class with a professor, writing this simulation using PASCAL.  It was a great experience!</p>
    
    
    
    <a href="/blog/wa-tor-world/#comment-233">
        <span class="glyphicon glyphicon-link"></span> Link
    </a> |
    <a href="#reply-233" class="reply">
        <span class="glyphicon glyphicon-share-alt"></span> Reply
    </a>
    
    <div class="rating">
    

<span id="rating-233">
    
    Current rating: 3
    
</span>


<form class="form-inline" role="form" method="post" action="/rating/">
    
    <input type='hidden' name='csrfmiddlewaretoken' value='jYnwcXau4v3oisaXo6kU5XwazOjbqb30iVxNOt1ZynyF4fznQlXMoZonig2HtHxZ' />
    
    <ul class="radio radio-inline"><li> <ul id="id_value"><li><label for="id_value_0"><input id="id_value_0" name="value" type="radio" value="1" required /> 1</label></li>
<li><label for="id_value_1"><input id="id_value_1" name="value" type="radio" value="2" required /> 2</label></li>
<li><label for="id_value_2"><input id="id_value_2" name="value" type="radio" value="3" required /> 3</label></li>
<li><label for="id_value_3"><input id="id_value_3" name="value" type="radio" value="4" required /> 4</label></li>
<li><label for="id_value_4"><input id="id_value_4" name="value" type="radio" value="5" required /> 5</label></li></ul><input id="id_content_type" name="content_type" type="hidden" value="generic.threadedcomment" /><input id="id_object_pk" name="object_pk" type="hidden" value="233" /><input id="id_timestamp" name="timestamp" type="hidden" value="1595058578" /><input id="id_security_hash" maxlength="40" minlength="40" name="security_hash" type="hidden" value="83a7999d895a1df7b9dd37179c9be68593eca9f9" /></li></ul>
    <input type="submit" class="btn btn-default btn-sm" value="Rate"
        onclick="return $(this.form).find('input:checked').length == 1;">
</form>


    </div>
    
    <form class="comment-reply-form" method="post" id="reply-233"
        action="/comment/#reply-233"
        style="display:none;">
        
        



<input type="hidden" name="referrer" value="https://scipython.com/blog/?page=8">
<input type='hidden' name='csrfmiddlewaretoken' value='jYnwcXau4v3oisaXo6kU5XwazOjbqb30iVxNOt1ZynyF4fznQlXMoZonig2HtHxZ' />




<input id="id_content_type" name="content_type" type="hidden" value="blog.blogpost" />



<input id="id_object_pk" name="object_pk" type="hidden" value="62" />



<input id="id_timestamp" name="timestamp" type="hidden" value="1595058578" />



<input id="id_security_hash" maxlength="40" minlength="40" name="security_hash" type="hidden" value="498e548d7989492df60ea9feb19f7213d3fa5af5" />



<div class="form-group input_id_name 
    ">
    <label class="control-label" for="id_name">Name</label>
    <input id="id_name" maxlength="50" name="name" type="text" required />
    
    <p class="help-block">required</p>
    
</div>



<div class="form-group input_id_email 
    ">
    <label class="control-label" for="id_email">Email</label>
    <input id="id_email" name="email" type="email" required />
    
    <p class="help-block">required (not published)</p>
    
</div>



<div class="form-group input_id_url 
    ">
    <label class="control-label" for="id_url">Website</label>
    <input id="id_url" name="url" type="url" />
    
    <p class="help-block">optional</p>
    
</div>



<div class="form-group input_id_comment 
    ">
    <label class="control-label" for="id_comment">Comment</label>
    <textarea cols="40" id="id_comment" maxlength="3000" name="comment" rows="10" required>
</textarea>
    
    <p class="help-block">required</p>
    
</div>



<div class="form-group input_id_honeypot 
    ">
    <label class="control-label" for="id_honeypot">If you enter anything in this field your comment will be treated as spam</label>
    <input id="id_honeypot" name="honeypot" type="text" />
    
</div>



        
        <input type="hidden" name="replied_to" value="233">
        <input class="btn btn-primary btn-lg" type="submit" value="Reply">
    </form>

    

    






    
    </div>
    
</div>





<h3>New Comment</h3>
<form method="post" id="comment" action="/comment/#comment">
    
    



<input type="hidden" name="referrer" value="https://scipython.com/blog/?page=8">
<input type='hidden' name='csrfmiddlewaretoken' value='jYnwcXau4v3oisaXo6kU5XwazOjbqb30iVxNOt1ZynyF4fznQlXMoZonig2HtHxZ' />




<input id="id_content_type" name="content_type" type="hidden" value="blog.blogpost" />



<input id="id_object_pk" name="object_pk" type="hidden" value="62" />



<input id="id_timestamp" name="timestamp" type="hidden" value="1595058578" />



<input id="id_security_hash" maxlength="40" minlength="40" name="security_hash" type="hidden" value="498e548d7989492df60ea9feb19f7213d3fa5af5" />



<div class="form-group input_id_name 
    ">
    <label class="control-label" for="id_name">Name</label>
    <input id="id_name" maxlength="50" name="name" type="text" required />
    
    <p class="help-block">required</p>
    
</div>



<div class="form-group input_id_email 
    ">
    <label class="control-label" for="id_email">Email</label>
    <input id="id_email" name="email" type="email" required />
    
    <p class="help-block">required (not published)</p>
    
</div>



<div class="form-group input_id_url 
    ">
    <label class="control-label" for="id_url">Website</label>
    <input id="id_url" name="url" type="url" />
    
    <p class="help-block">optional</p>
    
</div>



<div class="form-group input_id_comment 
    ">
    <label class="control-label" for="id_comment">Comment</label>
    <textarea cols="40" id="id_comment" maxlength="3000" name="comment" rows="10" required>
</textarea>
    
    <p class="help-block">required</p>
    
</div>



<div class="form-group input_id_honeypot 
    ">
    <label class="control-label" for="id_honeypot">If you enter anything in this field your comment will be treated as spam</label>
    <input id="id_honeypot" name="honeypot" type="text" />
    
</div>



    
    <div class="form-actions">
        <input class="btn btn-primary btn-lg" type="submit" value="Comment">
    </div>
</form>

</div>




</div>

</div>
</div>

<footer>
<div class="container">
</div>
</footer>








<script>

var _gaq = _gaq || [['_trackPageview']];
_gaq.unshift(['_setAccount', 'UA-91424547-3']);
(function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = '//www.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
})(document, 'script');

</script>


</body>
</html>
